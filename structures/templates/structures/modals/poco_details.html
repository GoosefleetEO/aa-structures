{% load i18n %}
{% load static %}
{% load humanize %}
{% load evelinks %}
{% load structures %}

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title">{{ structure }}</h4>
</div>

<div class="modal-body">
    {% detail_title structure %}
    <br>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#tab-poco-general" aria-controls="modules" role="tab" data-toggle="tab">General</a></li>
        <li role="presentation"><a href="#tab-poco-reinforcement" aria-controls="access" role="tab" data-toggle="tab">Reinforcement exit time</a></li>
        <li role="presentation"><a href="#tab-poco-settings" aria-controls="settings" role="tab" data-toggle="tab">Tax rates & access</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="tab-poco-general">
            <ul class="list-group">
                {% list_item _("Corporation") structure.owner url=structure.owner.corporation|dotlan_corporation_url %}
                    {% with alliance=structure.owner.corporation.alliance %}
                        {% list_item _("Alliance") alliance|default:"-" url=alliance|dotlan_alliance_url %}
                    {% endwith %}
                {% list_item _("Location") structure.location_name url=structure.eve_solar_system.profile_url %}
                {% list_item _("Constellation") structure.eve_solar_system.eve_constellation %}
                {% with eve_region=structure.eve_solar_system.eve_constellation.eve_region %}
                    {% list_item _("Region") eve_region.name url=eve_region|dotlan_region_url %}
                {% endwith %}
                {% list_item _("Planet Type") structure.eve_planet.eve_type_name_short %}
            </ul>
        </div>

        <div role="tabpanel" class="tab-pane" id="tab-poco-reinforcement">
            <ul class="list-group">
                {% include "structures/modals/poco_details_item.html" with title="Earliest" value=details.reinforce_exit_start type="hour" %}
                {% include "structures/modals/poco_details_item.html" with title="Latest" value=details.reinforce_exit_end type="hour" %}
            </ul>
        </div>

        <div role="tabpanel" class="tab-pane" id="tab-poco-settings">
            <ul class="list-group">
                {% include "structures/modals/poco_details_item.html" with title="Corporation members" value=details.corporation_tax_rate type="tax" has_access=True %}
                {% include "structures/modals/poco_details_item.html" with title="Alliance members" value=details.alliance_tax_rate type="tax" has_access=details.allow_alliance_access %}
                {% include "structures/modals/poco_details_item.html" with title="Terrible standing" value=details.terrible_standing_tax_rate type="tax" has_access=details.standing_level_access_map.TERRIBLE %}
                {% include "structures/modals/poco_details_item.html" with title="Bad standing" value=details.bad_standing_tax_rate type="tax" has_access=details.standing_level_access_map.BAD %}
                {% include "structures/modals/poco_details_item.html" with title="Neutral standing" value=details.neutral_standing_tax_rate type="tax" has_access=details.standing_level_access_map.NEUTRAL %}
                {% include "structures/modals/poco_details_item.html" with title="Good standing" value=details.good_standing_tax_rate type="tax" has_access=details.standing_level_access_map.GOOD %}
                {% include "structures/modals/poco_details_item.html" with title="Excellent standing" value=details.excellent_standing_tax_rate type="tax" has_access=details.standing_level_access_map.EXCELLENT %}
            </ul>
        </div>
    </div>

    <p class="text-muted">Last updated {{ last_updated|naturaltime|default:"?" }}</p>
</div>
