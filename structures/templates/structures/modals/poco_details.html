{% load i18n %}
{% load static %}
{% load humanize %}
{% load evelinks %}
{% load structures %}

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title">{{ structure }}</h4>
</div>

<div class="modal-body">
    {% detail_title structure %}
    <br>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
            <a href="#tab-poco-general" aria-controls="modules" role="tab" data-toggle="tab">
                {% translate "General" %}
            </a>
        </li>
        <li role="presentation">
            <a href="#tab-poco-reinforcement" aria-controls="access" role="tab" data-toggle="tab">
                {% translate "Reinforcement Time" %}
            </a>
        </li>
        <li role="presentation">
            <a href="#tab-poco-settings" aria-controls="settings" role="tab" data-toggle="tab">
                {% translate "Tax Rates & Access" %}
            </a>
        </li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="tab-poco-general">
            <ul class="list-group">
                {% list_item _("Corporation") structure.owner url=structure.owner.corporation|dotlan_corporation_url %}
                    {% with alliance=structure.owner.corporation.alliance %}
                        {% list_item _("Alliance") alliance|default:"-" url=alliance|dotlan_alliance_url %}
                    {% endwith %}
                {% list_item _("Location") structure.location_name url=structure.eve_solar_system.profile_url %}
                {% list_item _("Constellation") structure.eve_solar_system.eve_constellation %}
                {% with eve_region=structure.eve_solar_system.eve_constellation.eve_region %}
                    {% list_item _("Region") eve_region.name url=eve_region|dotlan_region_url %}
                {% endwith %}
                {% list_item _("Planet Type") structure.eve_planet.eve_type_name_short %}
            </ul>
        </div>

        <div role="tabpanel" class="tab-pane" id="tab-poco-reinforcement">
            <ul class="list-group">
                {% list_item _("Earliest") details.reinforce_exit_start_str %}
                {% list_item _("Latest") details.reinforce_exit_end_str %}
            </ul>
        </div>

        <div role="tabpanel" class="tab-pane" id="tab-poco-settings">
            <ul class="list-group">
                {% list_tax_item _("Corporation members") details.corporation_tax_rate True %}
                {% list_tax_item _("Alliance members") details.alliance_tax_rate details.allow_alliance_access %}
                {% list_tax_item _("Terrible standing") details.terrible_standing_tax_rate details.standing_level_access_map.TERRIBLE %}
                {% list_tax_item _("Bad standing") details.bad_standing_tax_rate details.standing_level_access_map.BAD %}
                {% list_tax_item _("Neutral standing") details.neutral_standing_tax_rate details.standing_level_access_map.NEUTRAL %}
                {% list_tax_item _("Good standing") details.good_standing_tax_rate details.standing_level_access_map.GOOD %}
                {% list_tax_item _("Excellent standing") details.excellent_standing_tax_rate details.standing_level_access_map.EXCELLENT %}
            </ul>
        </div>
    </div>

    <p class="text-muted">Last updated {{ last_updated|naturaltime|default:"?" }}</p>
</div>
